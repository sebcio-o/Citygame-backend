<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=\, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      body {
        background-color: #343332;
      }
    </style>
  </head>
  <body>
    <div id="map" class="w-full h-96"></div>

    <main class="space-y-4 m-10 flex flex-row">
      <div id="chart_div"></div>
      <div class="data w-1/2 space-y-4 m-10">
        <div class="report flex flex-row w-full p-1 text-white">
          <p class="iter w-5">Id</p>
          <p class="title w-1/3">Tytul</p>
          <p class="dsc w-1/3">Opis</p>
          <p class="category w-1/3">Kategoria</p>
        </div>

        {% for r in object_list %}
        <div
          class="
            report
            block
            border-2 border-fuchsia-600
            bg-white
            rounded
            flex flex-row
            w-full
            p-4
          "
        >
          <p class="iter w-5">{{forloop.counter}}.</p>
          <p class="title w-1/3">{{r.title}}</p>
          <p class="dsc w-1/3">{{r.description}}</p>
          <p class="category w-1/3">{{r.get_category_display}}</p>
        </div>
        {% endfor %}
      </div>
    </main>

    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        // Create the data table.
        var data = new google.visualization.DataTable();

        data.addRows([
          ["Niebezpieczeństwo", 3],
          ["Usprawnienie", 1],
          ["Inne", 1],
        ]);

        var options = {
          title: "Kategorie zgłoszeń  ",
          width: 400,
          height: 300,
          backgroundColor: "#343332",
        };

        var chart = new google.visualization.PieChart(
          document.getElementById("chart_div")
        );
        chart.draw(data, options);
      }
      mapboxgl.accessToken =
        "pk.eyJ1Ijoic2ViYXN0aWFuZWtndCIsImEiOiJja3VraTI2M2kwMDBpMm5wZmYwbHJwZ3B6In0.l4KxXe_1ipTO_3xpHegXng";
      const map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/sebastianekgt/ckukip62m4b7b18od92v0jrxl",
        center: [19.70638, 52.54682],
        zoom: 12,
      });
    </script>
  </body>
</html>
